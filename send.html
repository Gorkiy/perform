<!DOCTYPE html>
<html>
	<head>
		<title>SHRI metrics</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="style.css" rel="stylesheet">
	</head>
	<body>
		<h1 class="intro">Hello darling!</h1>
		<div class="box">
			<div class="cat">
				<div class="cat__body"></div>
				<div class="cat__body"></div>
				<div class="cat__tail"></div>
				<div class="cat__head"></div>
			</div>
		</div>
		<script src="send.js"></script>
		<script>
			let counter = new Counter();

			counter.init('D8F28E52-3239-11E2-9EDF-DDF309079123', String(Math.random()).substr(2, 12), 'index.html');
			counter.setAdditionalParams({
				env: 'production',
				platform: 'touch'
			});

			counter.send('connect', performance.timing.connectEnd - performance.timing.connectStart);
			counter.send('ttfb', performance.timing.responseEnd - performance.timing.requestStart);

			let timeStart = Date.now();

			setTimeout(function () {
				const loader = document.querySelector('.cat');
				const container = document.querySelector('.box');

				loader.classList.add('visually-hidden');
				counter.send('loaded', Date.now() - timeStart);

				const image = document.createElement('IMG');
				image.src="./images/cat.jpg";
				image.classList.add('result');
				image.onload = () => counter.send('result', Date.now() - timeStart);
				container.append(image);
			}, Math.random() * 1000 + 500);
		</script>
	</body>
</html>